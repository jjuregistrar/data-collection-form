<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Enhanced Survey Form</title>
  <style>
    :root {
      color-scheme: light dark;
      --primary-color: #4CAF50;
      --error-color: #f44336;
      --warning-color: #ff9800;
      --success-color: #4CAF50;
      --text-color: #333;
      --bg-color: #f9f9f9;
      --input-bg: white;
      --border-color: #ddd;
    }
    
    @media (prefers-color-scheme: dark) {
      :root {
        --text-color: #fff;
        --bg-color: #1e1e1e;
        --input-bg: #2d2d2d;
        --border-color: #444;
      }
    }
    
    body { 
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
      margin: 0;
      padding: 0;
      line-height: 1.6;
      color: var(--text-color);
      background-color: var(--bg-color);
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid var(--primary-color);
    }
    
    h1 {
      color: var(--primary-color);
      margin-bottom: 10px;
    }
    
    .form-container {
      background-color: var(--input-bg);
      border: 2px solid var(--primary-color);
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .status-banner {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
      font-weight: bold;
      display: none;
    }
    
    .status-open {
      background-color: rgba(76, 175, 80, 0.1);
      border: 2px solid var(--success-color);
      color: var(--success-color);
    }
    
    .status-closed {
      background-color: rgba(244, 67, 54, 0.1);
      border: 2px solid var(--error-color);
      color: var(--error-color);
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group.full-width {
      grid-column: 1 / -1;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }
    
    .required::after {
      content: " *";
      color: var(--error-color);
    }
    
    input, select, textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 16px;
      background-color: var(--input-bg);
      color: var(--text-color);
      transition: border-color 0.3s, box-shadow 0.3s;
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
    }
    
    input.error, select.error, textarea.error {
      border-color: var(--error-color);
      background-color: rgba(244, 67, 54, 0.05);
    }
    
    .error-message {
      color: var(--error-color);
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }
    
    .character-count {
      font-size: 14px;
      text-align: right;
      margin-top: 5px;
    }
    
    .character-count.warning {
      color: var(--warning-color);
    }
    
    .character-count.error {
      color: var(--error-color);
    }
    
    .checkbox-group {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-top: 20px;
    }
    
    .checkbox-group input {
      width: auto;
      margin-top: 3px;
    }
    
    .terms-text {
      font-size: 14px;
    }
    
    .submit-section {
      text-align: center;
      margin-top: 30px;
    }
    
    .submit-btn {
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 15px 40px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
    }
    
    .submit-btn:hover:not(:disabled) {
      background-color: #45a049;
      transform: translateY(-2px);
    }
    
    .submit-btn:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
      transform: none;
    }
    
    .response-message {
      padding: 15px;
      border-radius: 6px;
      margin-top: 20px;
      text-align: center;
      font-weight: bold;
      display: none;
    }
    
    .response-success {
      background-color: rgba(76, 175, 80, 0.1);
      border: 1px solid var(--success-color);
      color: var(--success-color);
      display: block;
    }
    
    .response-error {
      background-color: rgba(244, 67, 54, 0.1);
      border: 1px solid var(--error-color);
      color: var(--error-color);
      display: block;
    }
    
    .debug-info {
      background-color: rgba(0, 0, 0, 0.05);
      padding: 15px;
      border-radius: 6px;
      margin-top: 20px;
      font-family: monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      display: none;
    }
    
    .admin-panel {
      background-color: rgba(33, 150, 243, 0.1);
      border: 1px solid #2196F3;
      border-radius: 8px;
      padding: 20px;
      margin-top: 40px;
    }
    
    .admin-panel h3 {
      margin-top: 0;
      color: #2196F3;
    }
    
    .admin-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .admin-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      transition: opacity 0.3s;
    }
    
    .admin-btn:hover {
      opacity: 0.9;
    }
    
    .btn-open {
      background-color: var(--success-color);
      color: white;
    }
    
    .btn-close {
      background-color: var(--error-color);
      color: white;
    }
    
    .btn-test {
      background-color: #FF9800;
      color: white;
    }
    
    .btn-debug {
      background-color: #9C27B0;
      color: white;
    }
    
    .btn-view {
      background-color: #2196F3;
      color: white;
    }
    
    @media (max-width: 600px) {
      .container {
        padding: 10px;
      }
      
      .form-container {
        padding: 20px;
      }
      
      .admin-controls {
        flex-direction: column;
      }
      
      .admin-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üìã Enhanced Survey Form</h1>
      <p>Please fill out all required fields marked with *</p>
    </header>
    
    <!-- Status Banner -->
    <div id="statusBanner" class="status-banner">
      Loading form status...
    </div>
    
    <!-- Response Message -->
    <div id="responseMessage" class="response-message"></div>
    
    <!-- Debug Info (hidden by default) -->
    <div id="debugInfo" class="debug-info"></div>
    
    <!-- Main Form -->
    <div class="form-container">
      <form id="surveyForm" novalidate>
        <div class="form-grid">
          <!-- Personal Information -->
          <div class="form-group">
            <label for="name" class="required">Full Name</label>
            <input type="text" id="name" name="name" 
                   placeholder="Enter your full name"
                   maxlength="100"
                   required>
            <div class="error-message" id="nameError">Please enter your name (2-100 characters)</div>
          </div>
          
          <div class="form-group">
            <label for="email" class="required">Email Address</label>
            <input type="email" id="email" name="email" 
                   placeholder="your.email@example.com"
                   required>
            <div class="error-message" id="emailError">Please enter a valid email address</div>
          </div>
          
          <div class="form-group">
            <label for="phone">Phone Number (Optional)</label>
            <input type="tel" id="phone" name="phone" 
                   placeholder="+1 (123) 456-7890">
            <div class="error-message" id="phoneError">Please enter a valid phone number</div>
          </div>
          
          <!-- Age Group -->
          <div class="form-group">
            <label for="age" class="required">Age Group</label>
            <select id="age" name="age" required>
              <option value="">Select your age group</option>
              <option value="under18">Under 18</option>
              <option value="18-25">18-25</option>
              <option value="26-35">26-35</option>
              <option value="36-50">36-50</option>
              <option value="51-65">51-65</option>
              <option value="over65">Over 65</option>
            </select>
            <div class="error-message" id="ageError">Please select your age group</div>
          </div>
          
          <!-- Country -->
          <div class="form-group">
            <label for="country" class="required">Country</label>
            <select id="country" name="country" required>
              <option value="">Select your country</option>
              <option value="US">United States</option>
              <option value="UK">United Kingdom</option>
              <option value="CA">Canada</option>
              <option value="AU">Australia</option>
              <option value="IN">India</option>
              <option value="other">Other</option>
            </select>
            <div class="error-message" id="countryError">Please select your country</div>
          </div>
          
          <!-- Rating -->
          <div class="form-group">
            <label for="rating" class="required">Service Rating</label>
            <select id="rating" name="rating" required>
              <option value="">Select a rating</option>
              <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê - Excellent</option>
              <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê - Very Good</option>
              <option value="3">‚≠ê‚≠ê‚≠ê - Good</option>
              <option value="2">‚≠ê‚≠ê - Fair</option>
              <option value="1">‚≠ê - Poor</option>
            </select>
            <div class="error-message" id="ratingError">Please select a rating</div>
          </div>
          
          <!-- Subscription -->
          <div class="form-group">
            <label for="subscription" class="required">Subscription Type</label>
            <select id="subscription" name="subscription" required>
              <option value="">Select subscription type</option>
              <option value="free">Free</option>
              <option value="basic">Basic ($9.99/month)</option>
              <option value="premium">Premium ($19.99/month)</option>
              <option value="enterprise">Enterprise (Custom)</option>
            </select>
            <div class="error-message" id="subscriptionError">Please select subscription type</div>
          </div>
          
          <!-- Source -->
          <div class="form-group">
            <label for="source" class="required">How did you hear about us?</label>
            <select id="source" name="source" required>
              <option value="">Select an option</option>
              <option value="search">Search Engine (Google, Bing, etc.)</option>
              <option value="social">Social Media (Facebook, Twitter, etc.)</option>
              <option value="friend">Friend/Word of Mouth</option>
              <option value="ad">Advertisement</option>
              <option value="email">Email Newsletter</option>
              <option value="other">Other</option>
            </select>
            <div class="error-message" id="sourceError">Please tell us how you heard about us</div>
          </div>
          
          <!-- Feedback -->
          <div class="form-group full-width">
            <label for="feedback" class="required">Your Feedback</label>
            <textarea id="feedback" name="feedback" 
                      rows="6" 
                      placeholder="Please share your detailed feedback here..."
                      maxlength="1000"
                      required></textarea>
            <div class="character-count" id="feedbackCount">0/1000 characters</div>
            <div class="error-message" id="feedbackError">Feedback must be at least 10 characters</div>
          </div>
          
          <!-- Terms -->
          <div class="form-group full-width">
            <div class="checkbox-group">
              <input type="checkbox" id="terms" name="terms" required>
              <div class="terms-text">
                <label for="terms" class="required">
                  I agree to the <a href="#" target="_blank">Terms and Conditions</a> and <a href="#" target="_blank">Privacy Policy</a>
                </label>
                <p class="muted">By checking this box, you consent to our terms and privacy policy.</p>
              </div>
            </div>
            <div class="error-message" id="termsError">You must agree to the terms to continue</div>
          </div>
        </div>
        
        <!-- Submit Button -->
        <div class="submit-section">
          <button type="submit" id="submitBtn" class="submit-btn">
            Submit Survey
          </button>
          <div id="loadingSpinner" style="display: none; margin-top: 10px;">
            <div style="display: inline-block; width: 20px; height: 20px; border: 2px solid #f3f3f3; border-top: 2px solid var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite;"></div>
            <span style="margin-left: 10px;">Submitting...</span>
          </div>
        </div>
      </form>
    </div>
    
    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel" style="display: none;">
      <h3>üîß Admin Controls</h3>
      <div class="admin-controls">
        <button class="admin-btn btn-open" onclick="setFormStatus(true)">Open Submissions</button>
        <button class="admin-btn btn-close" onclick="setFormStatus(false)">Close Submissions</button>
        <button class="admin-btn btn-test" onclick="testSubmission()">Test Submission</button>
        <button class="admin-btn btn-debug" onclick="toggleDebug()">Toggle Debug</button>
        <button class="admin-btn btn-view" onclick="viewSheet()">View Sheet</button>
      </div>
      <div id="adminMessage"></div>
    </div>
  </div>

<script>
  // CONFIGURATION - Update this with your deployed Apps Script URL
  const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwjlUN9Z20QiSok6KJKicb2a3kU_XQjdBKXHstJ6KnOz9DcwBk9yEnQR6FOEt8tn-KB5w/exec';
  
  // Google Sheet URL
  const GOOGLE_SHEET_URL = 'https://docs.google.com/spreadsheets/d/1JyfrhYh2g-zelVNkNuZhBod-YNV8ihnawsxFa1Z0BWw/edit';
  
  // DOM Elements
  const form = document.getElementById('surveyForm');
  const submitBtn = document.getElementById('submitBtn');
  const loadingSpinner = document.getElementById('loadingSpinner');
  const responseMessage = document.getElementById('responseMessage');
  const statusBanner = document.getElementById('statusBanner');
  const debugInfo = document.getElementById('debugInfo');
  const adminPanel = document.getElementById('adminPanel');
  const adminMessage = document.getElementById('adminMessage');
  const feedbackTextarea = document.getElementById('feedback');
  const feedbackCount = document.getElementById('feedbackCount');
  
  // State - Manage opening/closing purely in GitHub HTML
  let formStatus = 'open'; // Default to open
  let debugMode = false;
  
  // Initialize
  document.addEventListener('DOMContentLoaded', async () => {
    console.log('Survey Form Initializing...');
    
    // Check URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('admin') === 'true') {
      adminPanel.style.display = 'block';
    }
    if (urlParams.get('debug') === 'true') {
      debugMode = true;
      debugInfo.style.display = 'block';
      debugInfo.innerHTML = '<strong>Debug Mode Enabled</strong><br>Endpoint: ' + APPS_SCRIPT_URL;
    }
    
    // Load form status from localStorage (GitHub-managed)
    const savedStatus = localStorage.getItem('surveyFormStatus');
    if (savedStatus) {
      formStatus = savedStatus;
    } else {
      // Default: always open (Apps Script always accepts)
      formStatus = 'open';
      localStorage.setItem('surveyFormStatus', 'open');
    }
    
    // Set up event listeners
    setupEventListeners();
    
    // Update status display
    updateStatusBanner();
    
    // Test endpoint connection
    await testEndpointConnection();
    
    console.log('Survey Form Ready - Status:', formStatus);
  });
  
  // Set up event listeners
  function setupEventListeners() {
    // Character counter for feedback
    feedbackTextarea.addEventListener('input', updateCharacterCount);
    
    // Real-time validation
    const fields = ['name', 'email', 'phone', 'age', 'country', 'rating', 'subscription', 'source', 'feedback'];
    fields.forEach(fieldId => {
      const field = document.getElementById(fieldId);
      if (field) {
        field.addEventListener('blur', () => validateField(fieldId));
      }
    });
    
    // Terms checkbox validation
    document.getElementById('terms').addEventListener('change', () => validateField('terms'));
    
    // Form submission
    form.addEventListener('submit', handleSubmit);
  }
  
  // Update character count
  function updateCharacterCount() {
    const length = feedbackTextarea.value.length;
    feedbackCount.textContent = `${length}/1000 characters`;
    
    if (length > 900) {
      feedbackCount.className = 'character-count warning';
    } else if (length > 1000) {
      feedbackCount.className = 'character-count error';
    } else {
      feedbackCount.className = 'character-count';
    }
  }
  
  // Validate a single field
  function validateField(fieldId) {
    const field = document.getElementById(fieldId);
    const errorElement = document.getElementById(fieldId + 'Error');
    
    if (!field) return true;
    
    let isValid = true;
    let message = '';
    
    const value = field.type === 'checkbox' ? field.checked : field.value.trim();
    const isRequired = field.hasAttribute('required');
    
    // Check required fields
    if (isRequired && !value) {
      isValid = false;
      message = 'This field is required';
    } else if (value) {
      // Field-specific validation
      switch (fieldId) {
        case 'name':
          if (value.length < 2 || value.length > 100) {
            isValid = false;
            message = 'Name must be 2-100 characters';
          }
          break;
          
        case 'email':
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(value)) {
            isValid = false;
            message = 'Please enter a valid email address';
          }
          break;
          
        case 'phone':
          const phoneRegex = /^[\+]?[0-9\s\-\(\)]+$/;
          if (value && !phoneRegex.test(value)) {
            isValid = false;
            message = 'Please enter a valid phone number';
          }
          break;
          
        case 'feedback':
          if (value.length < 10) {
            isValid = false;
            message = 'Feedback must be at least 10 characters';
          }
          break;
          
        case 'terms':
          if (!value) {
            isValid = false;
            message = 'You must agree to the terms';
          }
          break;
      }
    }
    
    // Update UI
    if (isValid) {
      field.classList.remove('error');
      errorElement.style.display = 'none';
    } else {
      field.classList.add('error');
      errorElement.textContent = message;
      errorElement.style.display = 'block';
    }
    
    return isValid;
  }
  
  // Validate entire form
  function validateForm() {
    let isValid = true;
    
    ['name', 'email', 'age', 'country', 'rating', 'subscription', 'feedback', 'source', 'terms'].forEach(fieldId => {
      if (!validateField(fieldId)) {
        isValid = false;
      }
    });
    
    return isValid;
  }
  
  // Handle form submission
  async function handleSubmit(event) {
    event.preventDefault();
    
    // Check if form is open (GitHub-managed check)
    if (formStatus !== 'open') {
      showResponse('Form submissions are currently closed.', 'error');
      return;
    }
    
    // Validate form
    if (!validateForm()) {
      showResponse('Please fix the errors above.', 'error');
      return;
    }
    
    // Prepare form data
    const formData = {
      timestamp: new Date().toISOString(),
      name: document.getElementById('name').value.trim(),
      email: document.getElementById('email').value.trim(),
      phone: document.getElementById('phone').value.trim(),
      age: document.getElementById('age').value,
      country: document.getElementById('country').value,
      rating: document.getElementById('rating').value,
      subscription: document.getElementById('subscription').value,
      feedback: document.getElementById('feedback').value.trim(),
      source: document.getElementById('source').value,
      terms: document.getElementById('terms').checked ? 'Accepted' : 'Not Accepted'
    };
    
    // Show loading state
    submitBtn.disabled = true;
    loadingSpinner.style.display = 'block';
    
    // Debug info
    if (debugMode) {
      debugInfo.innerHTML = `
        <strong>Submitting Data:</strong><br>
        <pre>${JSON.stringify(formData, null, 2)}</pre>
        <br><strong>To Endpoint:</strong><br>
        ${APPS_SCRIPT_URL}
      `;
    }
    
    try {
      // Submit to Google Apps Script
      const response = await submitToGoogleAppsScript(formData);
      
      if (debugMode) {
        debugInfo.innerHTML += `<br><strong>Response:</strong><br><pre>${JSON.stringify(response, null, 2)}</pre>`;
      }
      
      if (response.ok) {
        showResponse('‚úÖ Thank you! Your response has been successfully recorded.', 'success');
        form.reset();
        updateCharacterCount();
        
        // Clear form after success
        setTimeout(() => {
          showResponse('', 'success');
        }, 5000);
      } else {
        showResponse(`‚ùå Error: ${response.error || 'Submission failed'}`, 'error');
      }
    } catch (error) {
      console.error('Submission error:', error);
      showResponse('‚ùå Network error. Please check your connection and try again.', 'error');
      
      if (debugMode) {
        debugInfo.innerHTML += `<br><strong>Error:</strong><br>${error.message}`;
      }
    } finally {
      // Reset loading state
      submitBtn.disabled = false;
      loadingSpinner.style.display = 'none';
    }
  }
  
  // Submit data to Google Apps Script
  async function submitToGoogleAppsScript(data) {
    // Method 1: Try JSON POST
    try {
      const response = await fetch(APPS_SCRIPT_URL, {
        method: 'POST',
        mode: 'cors',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
      });
      
      const result = await response.json();
      return result;
    } catch (jsonError) {
      console.log('JSON POST failed, trying FormData...', jsonError);
      
      // Method 2: Try FormData POST
      const formData = new FormData();
      Object.keys(data).forEach(key => {
        formData.append(key, data[key]);
      });
      
      const response = await fetch(APPS_SCRIPT_URL, {
        method: 'POST',
        body: formData
      });
      
      return await response.json();
    }
  }
  
  // Update status banner
  function updateStatusBanner() {
    if (formStatus === 'open') {
      statusBanner.textContent = '‚úÖ Form submissions are OPEN';
      statusBanner.className = 'status-banner status-open';
      statusBanner.style.display = 'block';
    } else {
      statusBanner.textContent = '‚õî Form submissions are CLOSED';
      statusBanner.className = 'status-banner status-closed';
      statusBanner.style.display = 'block';
    }
  }
  
  // Show response message
  function showResponse(message, type) {
    responseMessage.textContent = message;
    responseMessage.className = `response-message response-${type}`;
    responseMessage.style.display = message ? 'block' : 'none';
  }
  
  // Test endpoint connection
  async function testEndpointConnection() {
    try {
      const response = await fetch(`${APPS_SCRIPT_URL}?test=true`);
      const result = await response.json();
      
      if (debugMode) {
        debugInfo.innerHTML += `<br><strong>Connection Test:</strong><br><pre>${JSON.stringify(result, null, 2)}</pre>`;
      }
      
      console.log('Endpoint connection:', result.ok ? '‚úì OK' : '‚úó Failed');
    } catch (error) {
      console.warn('Endpoint test failed:', error);
      
      if (debugMode) {
        debugInfo.innerHTML += `<br><strong>Connection Test Failed:</strong><br>${error.message}`;
      }
    }
  }
  
  // ==================== GITHUB-MANAGED ADMIN FUNCTIONS ====================
  
  // Set form status (managed in GitHub via localStorage)
  function setFormStatus(isOpen) {
    formStatus = isOpen ? 'open' : 'closed';
    
    // Save to localStorage (GitHub-managed persistence)
    localStorage.setItem('surveyFormStatus', formStatus);
    
    // Update UI
    updateStatusBanner();
    
    // Show message
    adminMessage.textContent = `Form submissions are now ${formStatus.toUpperCase()}`;
    adminMessage.style.color = isOpen ? 'var(--success-color)' : 'var(--error-color)';
    
    // Clear message after 3 seconds
    setTimeout(() => {
      adminMessage.textContent = '';
    }, 3000);
    
    // Log to console
    console.log(`Form status changed to: ${formStatus}`);
  }
  
  // Set 24/7 for 10 days (GitHub-managed)
  function set24_7For10Days() {
    // Open immediately
    setFormStatus(true);
    
    // Calculate 10 days from now
    const tenDaysFromNow = new Date();
    tenDaysFromNow.setDate(tenDaysFromNow.getDate() + 10);
    
    // Save the schedule in localStorage
    const schedule = {
      type: '24_7_10_days',
      endDate: tenDaysFromNow.toISOString(),
      setAt: new Date().toISOString()
    };
    
    localStorage.setItem('formSchedule', JSON.stringify(schedule));
    
    // Show message
    adminMessage.textContent = `‚úÖ Form is now OPEN 24/7 until ${tenDaysFromNow.toDateString()}`;
    adminMessage.style.color = 'var(--success-color)';
    
    // Check schedule daily
    checkSchedule();
    
    console.log(`24/7 schedule set until: ${tenDaysFromNow.toDateString()}`);
  }
  
  // Check schedule daily
  function checkSchedule() {
    const scheduleJson = localStorage.getItem('formSchedule');
    
    if (!scheduleJson) return;
    
    const schedule = JSON.parse(scheduleJson);
    const endDate = new Date(schedule.endDate);
    const now = new Date();
    
    // If we've passed the end date, close the form
    if (now > endDate) {
      setFormStatus(false);
      localStorage.removeItem('formSchedule');
      console.log('24/7 schedule has ended.');
    }
  }
  
  // Test submission
  function testSubmission() {
    // Auto-fill with test data
    document.getElementById('name').value = 'Test User';
    document.getElementById('email').value = 'test@example.com';
    document.getElementById('phone').value = '+1 (555) 123-4567';
    document.getElementById('age').value = '26-35';
    document.getElementById('country').value = 'US';
    document.getElementById('rating').value = '4';
    document.getElementById('subscription').value = 'premium';
    document.getElementById('source').value = 'search';
    document.getElementById('feedback').value = 'This is a test submission to verify the form is working correctly. Thank you for providing this service!';
    document.getElementById('terms').checked = true;
    
    updateCharacterCount();
    adminMessage.textContent = 'Test data loaded. Click Submit Survey to test.';
  }
  
  function toggleDebug() {
    debugMode = !debugMode;
    debugInfo.style.display = debugMode ? 'block' : 'none';
    adminMessage.textContent = `Debug mode ${debugMode ? 'enabled' : 'disabled'}`;
  }
  
  function viewSheet() {
    window.open(GOOGLE_SHEET_URL, '_blank');
  }
  
  // Check schedule on page load and every hour
  setInterval(checkSchedule, 60 * 60 * 1000); // Check every hour
  checkSchedule(); // Check immediately
  
  // Add CSS for spinner animation
  const style = document.createElement('style');
  style.textContent = `
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  `;
  document.head.appendChild(style);
</script>


  
</body>
</html>
